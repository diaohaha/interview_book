
### TCP建立连接和断开连接过程

```
三次握手的过程

1.a->b 发送TCP连接请求数据包，其中包含主机A的初始序列号seq(A)=x
2.b->a 发送确认数据包,含主机B的初始序列号seq(B)=y，以及主机B对主机A初始序列号的确认号ack(B)=seq(A)+1=x+1
3.a->b 机A收到主机B的确认报文后，还需作出确认，即发送一个序列号seq(A)=x+1；确认号为ack(A)=y+1的报文；

 
 为什么正好是3次握手?

 1.多了浪费资源。
 2.检查通信双方的发送能力和接收能力。第一个报文b知道a发送能力ok，第二个报文a知道了b接收到了。同时证明了b的发送能力和接收能力，然后第三个报文来证明了a的接收能力。


序列号seq：占4个字节，用来标记数据段的顺序，TCP把连接中发送的所有数据字节都编上一个序号，第一个字节的编号由本地随机产生；给字节编上序号后，就给每一个报文段指派一个序号；序列号seq就是这个报文段中的第一个字节的数据编号

四次挥手的过程

断开连接可以由客户端或者服务端来触发。

1.a->b fin=m 请求断开连接。 b接收到这个报文后处于close_wait状态
2.ack=m+1
3.fin
4.ack


```

![../resource/tcp_close_conn.png](四次)


### 谈一谈http和https的区别

```
https使用加密传输。(http + ssl)

HTTPS协议的主要作用可分为两种：

1、建立一个信息安全通道，保证数据传输的安全。
2、确认网站的真实性。
```

### 介绍一下SSL协议（Secure Sockets Layer）

```
ssl的机制是公钥加密，私钥解密

如何保证公钥不被篡改？
将公钥放在数字证书中。只要证书是可信的，公钥就是可信的。

公钥加密计算量太大，如何减少耗用的时间？
每一次对话（session），客户端和服务器端都生成一个"对话密钥"（session key），用它来加密信息。由于"对话密钥"是对称加密，所以运算速度非常快，而服务器公钥只用于加密"对话密钥"本身，这样就减少了加密运算的消耗时间。

建立连接的过程
（1） 客户端向服务器端索要并验证公钥。
（2） 双方协商生成"对话密钥"。
（3） 双方采用"对话密钥"进行加密通信。

```

### 有哪些常用的端口

```
21 ftp 22 ssh 23 telnet 53 dns 443 https 1080 sockets
```

