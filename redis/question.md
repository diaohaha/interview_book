### 介绍一下Redis的多实例部署

```
3种 主从 哨兵 集群

主从模式：1个Master，多个Slave。分散读压力，提高并发。master、slave之间的同步是以非阻塞的方式进行的，同步期间，客户端仍然可以提交查询或更新请求.同时有了Slave的数据备份，防治宕机就丢失数据。
但是Master宕机请求就会失败，实际应用中很少用到。

哨兵模式：主从模式的基础上加上了主从自动切换的功能。master挂掉可以自动进行切换，系统可用性更高。但是哨兵模式也一样不支持在线扩容，容量受限于单机容量。

集群模式：多Master，多Slave。不仅提高了读并发，也提高了写并发。 Cluster采用无中心结构,它的特点如下：客户端与redis节点直连,客户端不需要连接集群所有节点,连接集群中任何一个可用节点即可。可用节点根据key的值计算value存储在哪个节点上。然后去访问。(一致性hash 和 哈希槽)

为了保证高可用，Cluster模式也引入主从复制模式，一个主节点对应一个或者多个从节点，当主节点宕机的时候，就会启用从节点。

```

### 哨兵为什么一般配置单数

```
Sentianl的单数原则

选主投票的时候，避免出现同票。
```

### 为什么集群模式不需要哨兵，是谁顶替了哨兵的工作

```
Master节点就相当于哨兵。所以集群模式的主节点也一般为单数。
```

### 介绍一下Redis的持久化

```
AOF(记录命令)

RDB(记录数据快照)

宕机重启时候会检查这些文件进行自动恢复。
```

### 介绍一下Redis的过期策略


```
Redis是使用定期删除+惰性删除两者配合的过期策略。

定期删除指的是Redis默认每隔100ms就随机抽取一些设置了过期时间的key，检测这些key是否过期，如果过期了就将其删掉。

惰性删除不再是Redis去主动删除，而是在客户端要获取某个key的时候，Redis会先去检测一下这个key是否已经过期，如果没有过期则返回给客户端，如果已经过期了，那么Redis会删除这个key，不会返回给客户端。
```


### 介绍一下内存淘汰机制


```
有很多策略可以设置，但主要使用这两种lru

allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key。
volatile-lru：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。
```